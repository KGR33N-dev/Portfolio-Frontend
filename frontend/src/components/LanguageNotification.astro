---
const showNotification = Astro.url.searchParams.has('redirected');
---

{showNotification && (
  <div 
    class="fixed top-24 left-1/2 transform -translate-x-1/2 bg-blue-50 dark:bg-blue-800 border-2 border-blue-300 dark:border-blue-600 text-blue-900 dark:text-blue-100 px-6 py-3 rounded-lg shadow-xl z-50 max-w-md w-auto min-w-fit backdrop-blur-sm"
    id="language-notification"
  >
    <div class="flex items-center justify-between space-x-4">
      <span class="text-sm font-medium whitespace-nowrap">
        üåê We've detected your language preference and redirected you automatically.
      </span>
      <button 
        class="ml-3 text-blue-700 dark:text-blue-300 hover:text-blue-900 dark:hover:text-blue-100 font-bold text-lg leading-none"
        onclick="window.closeLanguageNotification()"
        aria-label="Close notification"
      >
        ‚úï
      </button>
    </div>
  </div>
)}

<script>
  // Auto-hide notification after 5 seconds with smooth animation
  if (document.getElementById('language-notification')) {
    setTimeout(() => {
      const notification = document.getElementById('language-notification');
      if (notification) {
        notification.style.opacity = '0';
        notification.style.transform = 'translate(-50%, -20px)';
        setTimeout(() => {
          notification.style.display = 'none';
        }, 300);
      }
    }, 5000);
  }
  
  // Function to manually close notification with animation
  window.closeLanguageNotification = function() {
    const notification = document.getElementById('language-notification');
    if (notification) {
      notification.style.opacity = '0';
      notification.style.transform = 'translate(-50%, -20px)';
      setTimeout(() => {
        notification.style.display = 'none';
      }, 300);
    }
  };
</script>

<style>
  #language-notification {
    transition: all 0.3s ease-in-out;
    animation: slideDown 0.3s ease-out;
  }
  
  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translate(-50%, -20px);
    }
    to {
      opacity: 1;
      transform: translate(-50%, 0);
    }
  }
  
  #language-notification button:hover {
    transform: scale(1.1);
    transition: transform 0.2s ease;
  }
</style>
